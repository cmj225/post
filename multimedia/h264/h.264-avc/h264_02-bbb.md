---
description: 영상 압축기술의 발전과 H.264/AVC의 기반이 되는 기초지식
---

# \[H264\_02\] 영상 압축기술의 발전과 기초지식

## 영상 압축 기술의 역사적 발전

* 영상 압축부호화의 **`목적`**
  * 원영상의 중요한 정보는 보존
  * 기타 정보\(중복된 정보\)를 다소 제거하여 데이터 양을 줄임
  * **`원화질을 잃지 않으면서 가능한 한 적은 데이터로 영상을 표현`**
* 영상 압축부호화 기술의 발전
  * `화소기반` : 화소 그 자체를 처리의 단위로 부호화하는 기술, `[예측]`
  * `블록기반` : 화소의 블록을 처리단위로 부호화하는 기술, `[변환]`
  * 현대 동영상 압축에서는 위 두가지를 혼합한 `하이브리드(혼성) 부호화`가 중심축이 된다.

![](../../../.gitbook/assets/image%20%2819%29.png)

* 용어 해설
  * **`화소 부호화(Pel-based coding)`** 화소를 하나의 처리단위로 하는 부호화
  * **`PCM(Pulse Code Modulation)`**  화소의 값을 디지털로 표현한 부호화
  * **`DPCM(Differential PCM)`** 이웃한 화소간의 차분치를 보내는 부호화
  * **`단순 프레임간 예측 부호화(Simple interframe prediction)`** : 이전 화면으로부터 현재의 화면을 예측하는 부호화
  * **`블록 부호화(Block-based coding)`** : 복수 개의 화소\(예를 들어 8x8=64개\)로 이뤄진 블록을 하나의 처리단위로 하는 부호화
  * **`움직임보상 프레임간 예측부호화(MC, Motion Compensated interframe prediction)`** 피사체의 움직임 정보를 사용해서, 이전화면으로부터 현재의 화면을 예측하는 부호화
  * **`변환부호화(Transform coding, DCT(Discrte Cosine Transform)`**  복수화소로 이뤄진 블록을 주파수 영역으로 변환한 후 처리하는 부호화
  * **`백터양자화(Vector Quantization)`** 복수화소로 이뤄진 블록을 미리 선택한 대표 패턴의 하나로 대응시키는 부호화
  * **`하이브리드 부호화(Hybrid Coding)`** 화소부호화인 움직임보상 프레임간 예측부호화\(MC\)와 블록부호화인 변환 부호화\(DCT\) 또는 벡터양자화\(VQ\) 등을 조합한 부호화
* 차례대로 각각을 자세히 살펴봄
  * ITU-R에서 정한 영상 압축부호화 시험영상인   [**`sie`**](https://www.youtube.com/watch?v=7_54nJ8z0kY) 를 사용하여 내용 소개

## PCM

* **`PCM(Pulse Code Modulation, 펄스부호변조)`** : 아날로그 신호를 **`샘플링`** + **`양자화`**하여 디지털 신호로 표현한 것

  * 디지털 신호화의 기본
  * **`샘플링(Sampling)`** : 시간방향과 진폭방향으로 연속적인 아날로그 신호를 일정간격으로 추출
  * **`양자화(Quantization)`** : 진폭방향으로 어떤 범위의 값을 하나의 대표값으로 표현
  * ![](../../../.gitbook/assets/image%20%2817%29.png) 



  * 컬러TV 신호의 표준 : `Y Cb Cr`

    * Y : 화면의 \[밝기\]를 표현하는 휘도신호
    * Cb, Cr: 화면의 \[색\]을 표현하는 색차신호
    * 인간의 눈은 \[밝기\]에 비해 \[색\]에 대한 해상도가 높지 않은 점에 착안해, 색차정보를 화소간 공유시킴으로서 데이터 양을 줄일 수 있음.
    * 다양한 YUV pixel format 참조

## DPCM

**예측 오차만을 보내는 DPCM**

* `DPCM(Differential PCM, 차분 PCM)`

  * 예측한 신호와 입력된 신호의 오차인 **`예측오차(Differential)`**만을 보내는 방법
  * `가장 단순한 예측`방법은 `현재의 화소값과 직전 화소값이 같다고 가정`하는 것

    | PCM | 5 | 6 | 5 | 5 | 4 | 5 | ... |
    | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
    | DPCM | +5 | +1 | -1 | 0 | -1 | +1 | ... |

  * **`차분치의 진폭분포는 0주변에 집중된 지수분포`**로 그 값들이 0 주위로 집중기 때문에, 이를 이용해 차분으로 신호를 표현함으로 `보다 적은 정보량으로 신호를 표현`할 수 있다
  * 아래의 이미지의 Y신호에서 차분을 표현한 경우, 대부분의 신호가 0이되고\(흰색\), 차분에 대한 부분이 남

          ![](../../../.gitbook/assets/image%20%2815%29.png)  ![](../../../.gitbook/assets/image%20%2812%29.png) 



  * 예측부호화의 **`부호기와 복호기`**의 구성
    * 예측이란 현재 주어진 정보를 바탕으로 미래의 정보를 추측하는 것으로, 이를 이용하기 위해서는 부호기와 복호기의 구성이 다음과 같이 이뤄짐.
    * 부호기와 복호기에서는 동일한 국부복호기를 사용하여, 동일한 예측오차를 받았을 때, 동일한 이미지로 복원이 가능하다.

![](../../../.gitbook/assets/image%20%2816%29.png)

![](../../../.gitbook/assets/image%20%2814%29.png)

* * 
## 프

* 예측이 정확해질 수록 차분에 대한 데이터는 작아질 수 있음 \(0에 차분이 몰리므로\)
* 예측에는 직전 화소값 뿐만 아니라 그 이전의 화소값 등이나, 화면 내의 다른 화소값 등이 활용될 수 있으며, 다양한 데이터를 활용할 수록 더 정확하게 예측할 수 있다.
*  그림 2-7
* 프레임내\(화면내\) 예측 : 예측하려는 화소가 동일 프래임에 존재
  * 화면을 부호화할 때, 이미 예측이 좌측 화소와 상단 화소를 각각 1/2씩 가중평균을 주는 방식을 일반적으로 사용
  *  그림 2-5: 프레임내 예측을 통해 얻은 프레임과의 차분
* 프레임간\(화면간\) 예측 : 예측하려는 화소가 다른 프레임에 존재
  * 정적인 영상의 경우, 화면간 예측이 비교적 정확하고 예측이 수월하기 때문에 DPCM을 이용하는 경우 큰 압축효과를 얻을 수 있음
  * 다만, 이를 위해서는 이전 프레임에 대한 영상신호를 저장하고 있어야 하는 문제가 있어, 1970년대 이후부터 프레임 메모리가 사용된 부호하 장치를 실현
  *  그림 2-8: 프레임간 예측을 통해 얻은 프레임과의 차분
* ?? **오디오 신호에서도 DPCM이 의미를 가지는가? 아닐것 같은데**



## MC\(움직임보상 프레임간 예측부호화\)

* 움직임보상 프레임간 부호화의 구조
  * 프레임간 부호화는 큰 움직임이 발생하는 프레임간에는 그 유사성이 사라져, 차분을 이용할 경우에 오히려 정보량이 증가하는 역효과가 발생할 수 있음
  * 움직임을 보상하자! motion vector
* 움직임보상 프레임간 예측의 확장

## DCT와 VQ

#### DCT와 벡터양자화 구조

* 블록단위의 부호화 방법 1: DCT변환의 구조
* 블록단위의 부호화 방법 2: 벡터양자화의 구조

#### 하이브리드 부호화 구조

#### 영상 압축부호화 표준의 역사와 그 발전

* H.261
* MPEG-1\(ISO/IEC 11172-2\)
* H.262\|MPEG-2\(ISO/IEC 13818-2\)
* H.263
* H.264\|MPEG-4\[MPEG-4 Part 2\(ISO/IEC 14496-2\)\]

